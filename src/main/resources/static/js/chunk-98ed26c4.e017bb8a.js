(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-98ed26c4"],{"004c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",{staticStyle:{"margin-top":"24px"},attrs:{title:"指派给我的 TOP10",bordered:!1}},[a("a-table",{ref:"table",attrs:{size:"default",rowKey:"id",pagination:!1,columns:t.columns,dataSource:t.bugList},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"title2",fn:function(e,n){return a("span",{},[n?a("a-popover",{attrs:{title:"当前状态"}},[a("template",{slot:"content"},[a("a-steps",{staticClass:"steps-popover",attrs:{size:"small",labelPlacement:"vertical",current:n.status}},[a("a-step",{attrs:{title:"未确认"}}),a("a-step",{attrs:{title:"已确认"}}),a("a-step",{attrs:{title:"处理中"}}),a("a-step",{attrs:{title:"已解决"}}),a("a-step",{attrs:{title:"已通过"}})],1)],1),a("a-tooltip",{attrs:{placement:"bottom"}},[a("template",{slot:"title"},[a("span",[t._v(t._s(e))])]),a("a",{staticStyle:{color:"#333"},attrs:{href:"javascript:;"}},[t._v(t._s(t._f("maxLength")(e)))])],2)],2):t._e()],1)}},{key:"severity",fn:function(e){return a("span",{staticClass:"severity_num",class:t.severityClass(e)},[a("label",[t._v(t._s(t.BUG_VARIABLES.severity[e]))])])}},{key:"priority",fn:function(e){return a("span",{staticClass:"priority_num",class:t.priorityClass(e)},[t._v(t._s(t.BUG_VARIABLES.priority[e]))])}},{key:"status",fn:function(e){return a("span",{},[a("label",{staticStyle:{"white-space":"nowrap"}},[t._v(t._s(t.STATUS_CODES[e]||"未确认"))])])}},{key:"action",fn:function(e,n){return a("span",{},[a("router-link",{directives:[{name:"action",rawName:"v-action",value:"workplace_bug_detail",expression:"'workplace_bug_detail'"}],attrs:{to:"/bug/detail/"+n.id}},[t._v("详情")]),a("a-divider",{attrs:{type:"vertical"}}),a("router-link",{directives:[{name:"action",rawName:"v-action",value:"workplace_bug_edit",expression:"'workplace_bug_edit'"}],attrs:{to:"/bug/edit/"+n.id}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{directives:[{name:"action",rawName:"v-action",value:"workplace_bug_delete",expression:"'workplace_bug_delete'"}],attrs:{href:"javascript:;"},on:{click:function(e){return t.handleDelete(n.id)}}},[t._v("删除")])],1)}}])})],1),a("a-card",{staticStyle:{"margin-top":"24px"},attrs:{title:"指派给我的"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("bar",{attrs:{id:"bar3",data:t.chartData["mine"]}})],1),a("a-col",{attrs:{span:12}},[a("pie",{staticClass:"pie-chart",staticStyle:{height:"254px"},attrs:{"chart-data":t.pieData["mine"],options:t.pieOptions}})],1)],1)],1),a("a-card",{staticStyle:{"margin-top":"24px"},attrs:{title:"我创建的"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("bar",{attrs:{id:"bar4",data:t.chartData["created"]}})],1),a("a-col",{attrs:{span:12}},[a("pie",{staticClass:"pie-chart",staticStyle:{height:"254px"},attrs:{"chart-data":t.pieData["created"],options:t.pieOptions}})],1)],1)],1)],1)},r=[],i=(a("7f7f"),a("bd86")),s=(a("cadf"),a("551c"),a("f751"),a("097d"),a("81d1")),o=a("ab09"),l=a("365c"),c=a("d9cd"),u=a("2af9"),d=(a("ac0d"),a("7104")),p={name:"StandardList",components:{HeadInfo:s["a"],STable:o["a"],Bar:u["a"],Pie:u["e"]},data:function(){var t;return t={BUG_VARIABLES:c["a"],STATUS_CODES:c["d"],countTitle:["状态","严重程度","优先级","项目"],columns:[{title:"编号",dataIndex:"code"},{title:"Bug标题",dataIndex:"title",scopedSlots:{customRender:"title2"},sorter:function(t,e){return t.title-e.title}},{title:"项目",dataIndex:"project",sorter:function(t,e){return t.project-e.project}},{title:"严重程度",dataIndex:"severity",scopedSlots:{customRender:"severity"},sorter:function(t,e){return t.severity-e.severity}},{title:"优先级",dataIndex:"priority",scopedSlots:{customRender:"priority"}},{title:"bug类型",dataIndex:"type"},{title:"bug影响版本",dataIndex:"edition"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建人",dataIndex:"creatorName"},{title:"开始日期",dataIndex:"startTime",customRender:function(t){return t.substring(0,10)}},{title:"截止日期",dataIndex:"settlingTime",customRender:function(t){return t.substring(0,10)},sort:!0},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],queryParam:{type:1},bugList:[],allCount:[],btnLoading:{"#bar1":!1,"#bar2":!1,"#bar3":!1,"#bar4":!1},pieOptions:{responsive:!0,maintainAspectRatio:!1,pieceLabel:{render:"value",precision:1},showAllTooltips:!0,plugins:{datalabels:{color:"#ffffff",font:{size:16}}}},pieData:{all:{},mine:{},created:{},project:{},depart:{}},chartData:{all:[],mine:[],created:[],project:[],depart:[]},query:{project:"",department:""},checkList:{0:"所有未解决的",1:"所有已解决的",2:"所有超时的",10:"指派给我，我未解决的",11:"指派给我，我已解决的",12:"指派给我，超时的",20:"我创建的，我未解决的",21:"我创建的，我已解决的",22:"我创建的，超时的"}},Object(i["a"])(t,"allCount",{all:[],mine:[],created:[],project:[]}),Object(i["a"])(t,"pieStyle",{stroke:"#fff",lineWidth:1}),t},filters:{maxLength:function(t){return t.length>10?t.substring(0,10)+"...":t}},created:function(){this.getBugList(),this.getAllCount()},methods:{getBugList:function(){var t=this;l["default"].bug.getTop10().then(function(e){t.bugList=e.result.data})},handleTableChange:function(t,e,a){console.log(t,e,a)},priorityClass:function(t){var e={};return e["priority_num_".concat(5-t)]=!0,e},severityClass:function(t){var e={};return e["severity_num_".concat(6-t)]=!0,e},onChangeType:function(){this.$refs.table.refresh()},refreshTable:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs.table.refresh(t)},handleDelete:function(t){var e=this;this.$confirm({title:"温馨提示",content:"您确定要删除该Bug吗？删除后无法恢复",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){l["default"].bug.remove(t).then(function(){e.$refs.table.refresh(!1)})},onCancel:function(){console.log("Cancel")}})},getAllCount:function(){var t=this;l["default"].bug.getCount(this.query).then(function(e){var a=e.data.map(function(t){return t.title=t.name,t.x=t.name,t.y=t.count,t});t.allCount["all"]=a.filter(function(t){return t.name.indexOf("所有")>=0}),t.allCount["mine"]=a.filter(function(t){return t.name.indexOf("指派给我")>=0}),t.allCount["created"]=a.filter(function(t){return t.name.indexOf("创建")>=0}),t.allCount["project"]=a.filter(function(t){return t.name.indexOf("项目")>=0}),t.allCount["depart"]=a.filter(function(t){return t.name.indexOf("部门")>=0}),t.formatPieData(),t.initChart("all"),t.initChart("mine"),t.initChart("created"),t.initChart("project")})},formatPieData:function(){for(var t in this.allCount)this.pieData[t]={datasets:[{data:this.allCount[t].map(function(t){return t.count}),backgroundColor:["#3AA1FF","#FBD437","#975FE5"]}],labels:this.allCount[t].map(function(t){return t.name})}},initChart:function(t){var e=(new d.View).source(this.allCount[t]);e.transform({type:"count",field:"count",dimension:"item",as:"count"}),this.chartData[t]=e.rows}}},f=p,m=(a("99bb"),a("2877")),b=Object(m["a"])(f,n,r,!1,null,"ab5db4d2",null);e["default"]=b.exports},"7b11":function(t,e,a){},"81d1":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head-info",class:t.center&&"center"},[a("span",[t._v(t._s(t.title))]),a("p",[t._v(t._s(t.content))]),t.bordered?a("em"):t._e()])},r=[],i={name:"HeadInfo",props:{title:{type:String,default:""},content:{type:String,default:""},bordered:{type:Boolean,default:!1},center:{type:Boolean,default:!0}}},s=i,o=(a("9d9c"),a("2877")),l=Object(o["a"])(s,n,r,!1,null,"7002d88c",null);e["a"]=l.exports},"99bb":function(t,e,a){"use strict";var n=a("e3ec"),r=a.n(n);r.a},"9d9c":function(t,e,a){"use strict";var n=a("7b11"),r=a.n(n);r.a},e3ec:function(t,e,a){}}]);